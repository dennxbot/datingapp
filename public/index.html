<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>💕 Quick Chat - Find Your Match</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <!-- Username Input Screen -->
        <div id="login-screen" class="screen active">
            <div class="login-container">
                <h1>💕 Quick Chat</h1>
                <p>Enter a username to find your match!</p>
                <form id="username-form">
                    <input 
                        type="text" 
                        id="username-input" 
                        placeholder="Enter your username" 
                        maxlength="20" 
                        required
                    >
                    <button type="submit">Find a Match</button>
                </form>
            </div>
        </div>

        <!-- Waiting Screen -->
        <div id="waiting-screen" class="screen">
            <div class="waiting-container">
                <h2>🔍 Looking for someone...</h2>
                <div class="spinner"></div>
                <p>Please wait while we find you a perfect match!</p>
                <button id="cancel-wait" class="secondary-btn">Cancel</button>
            </div>
        </div>

        <!-- Chat Screen -->
        <div id="chat-screen" class="screen">
            <div class="chat-container">
                <div class="chat-header">
                    <div class="partner-info">
                        <h2 id="chat-title">💬 Chat with <span id="partner-name"></span></h2>
                        <div class="status-indicator">
                            <span id="online-status" class="status-badge online">🟢 Online</span>
                        </div>
                    </div>
                    <button id="find-new-match" class="secondary-btn">Find Another Match</button>
                </div>
                
                <div id="messages-container" class="messages">
                    <div class="welcome-message">
                        🎉 You've been matched! Say hello!
                    </div>
                </div>
                
                <div id="typing-indicator" class="typing-indicator hidden">
                    <span id="partner-name-typing"></span> is typing
                    <div class="typing-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                </div>
                
                <div class="message-input-container">
                    <form id="message-form">
                        <input 
                            type="text" 
                            id="message-input" 
                            placeholder="Type your message..." 
                            maxlength="500" 
                            required
                        >
                        <button type="submit">Send</button>
                    </form>
                    <div class="char-counter">
                        <span id="char-count">0</span>/500
                    </div>
                </div>
            </div>
        </div>

        <!-- Partner Left Screen -->
        <div id="partner-left-screen" class="screen">
            <div class="partner-left-container">
                <h2>😔 Your chat partner left</h2>
                <p>Don't worry! There are plenty of other people to chat with.</p>
                <button id="find-another-match" class="primary-btn">Find Another Match</button>
            </div>
        </div>
    </div>

    <!-- Context Menu for Messages -->
    <div id="message-context-menu" class="context-menu hidden">
        <!-- Emoji Reactions Row -->
        <div class="emoji-reactions-row">
            <button class="emoji-btn" data-emoji="❤️">❤️</button>
            <button class="emoji-btn" data-emoji="😂">😂</button>
            <button class="emoji-btn" data-emoji="😮">😮</button>
            <button class="emoji-btn" data-emoji="😢">😢</button>
            <button class="emoji-btn" data-emoji="😡">😡</button>
            <button class="emoji-btn" data-emoji="👍">👍</button>
            <button class="more-emojis-btn">+</button>
        </div>
        
        <!-- Action Buttons -->
        <div class="context-actions">
            <button id="ctx-edit" class="context-action-btn">
                <span class="action-icon">✏️</span>
                <span class="action-text">Edit</span>
            </button>
            <button id="ctx-reply" class="context-action-btn">
                <span class="action-icon">↩️</span>
                <span class="action-text">Reply</span>
            </button>
            <button id="ctx-copy" class="context-action-btn">
                <span class="action-icon">📋</span>
                <span class="action-text">Copy</span>
            </button>
        </div>
    </div>

    <!-- Reply Preview Banner -->
    <div id="reply-banner" class="reply-banner hidden">
        <div class="reply-content">
            <div class="reply-header">
                <span class="reply-to">Replying to <span id="reply-username"></span></span>
                <button id="cancel-reply" class="cancel-reply">✕</button>
            </div>
            <div id="reply-message-preview" class="reply-message-preview"></div>
        </div>
    </div>

    <!-- Socket.IO Client Library -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="app.js"></script>
</body>
</html>
